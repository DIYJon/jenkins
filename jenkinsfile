@Library('jenkins_shared') _

pipeline{
    agent any
    stages{
        stage("Build"){
            steps{
                echo "Build"
                hello()
                helloVariable('Jon')
                script{
                    utils.printFromFunction()
                    utils.replaceString()
                }

            }
        }
        
        stage('Test on OS'){
            parallel{
                stage("Test on linux"){
                    steps{
                        def text = readFile file: "index.html"
                        if [[ $text == *${BUILD_NUMBER}* ]]; then
                            echo "It's there!"
                        fi
                        
                    }
                }

                stage("Test on windows"){
                    steps{
                        echo "Windows"
                    }
                }
            }
        }
        stage("Deploy"){
            steps{
                echo "Deploy"
            }
            
        }
    }
}